read a paper on ktrace A frame work for tracing the linux kernel and  Architecture of systemtap: a Linux trace/probe tool
